= Deploying a Java web app to the Azure cloud

:title: Deploying a Java web app to the Azure cloud
:authors: mikaelsu
:type: text
:tags: Backend, Cloud, Deploy, Java
:description: A tutorial on how to deploy a Java web app to Microsoft's Azure cloud service.
:linkattrs:
:imagesdir: ./images
:og_image: cloud-deployment-featured-image-azure.png

This tutorial shows you how to deploy a Java web application to Microsoft's Azure cloud. Azure offers a 30-day free trial that includes 12 months of free commercial services. You can find details of their free and commercial services on the Azure link:https://azure.microsoft.com/[Azure website].

NOTE: You need a credit card to confirm your identity when signing up on Microsoft Azure. 

*Prerequisites:*

. Create an Azure account at https://signup.azure.com/.
. Verify that you have Java installed by running the `java --version` command in your terminal. If not, link:https://aws.amazon.com/corretto/[download] and install the latest version on your computer.
. Verify that you have Git installed by running the `git --version` command in your terminal. If not, link:https://git-scm.com/book/en/v2/Getting-Started-Installing-Git[download] and install the latest version on your computer.
. Verify that you have Maven (at least version 3.0) installed by running the `mvn -v` command in your terminal. If not, link:https://maven.apache.org/[download] and install the latest version on your computer.

== Step 1: Install the Azure CLI

You can find installation instructions for different platforms in the link:https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest[Azure CLI documentation].

== Step 2: Download a Starter App

link:https://start.vaadin.com/dl[Click here to download a minimal Vaadin project]. Unpack the downloaded zip into a folder on your computer.

== Step 3: Add Azure Plugin

Open your `pom.xml` file and add the following section in the `<plugins>` tag in the `<build>` section:

[source,xml]
----
<plugin>
  <groupId>com.microsoft.azure</groupId>
  <artifactId>azure-webapp-maven-plugin</artifactId>
  <version>2.2.3</version>
</plugin>
----

== Step 4: Create a Production Build

Open the project directory from a terminal window, and enter `mvn package -Pproduction` command to generate a JAR file of your application.

== Step 5: Configure your Application

From the terminal window, enter `mvn azure-webapp:config` command. This command will first authenticate you with Azure via the browser (assuming you are not already logged in with Azure CLI). After that you will be asked to make a number of selections. You can select:

. *<create>* when asked to choose a Java SE Web App.
. *Linux* when asked to choose an OS.
. *Java* 11 for the Java version
. *F1* for the pricingTier
. Enter *'Y'* on your keyboard to confirm

image::azure-choices.png[Azure CLI choices]


== Step 6: Deploy your Application

From the terminal window, enter `mvn azure-webapp:deploy` command. You might be required to authenticate again in the browser. Once authenticated, your application will be deployed to Azure and you should see your application URL in the logs as in the following screenshot.

image::azure-deploy-success.png[Azure CLI log]
